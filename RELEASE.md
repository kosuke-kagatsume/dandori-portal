# Dandori Portal - リリースノート v1.0.0

## 🎉 リリース日: 2025-10-26

Dandori Portal v1.0.0 をリリースします。最強のHR（人事）領域特化システムとして、企業の人事業務を完全にデジタル化します。

---

## 📋 主要機能

### 1. HR管理機能（14ページ）

#### ダッシュボード
- 統計表示（勤怠・休暇・ワークフロー・給与）
- グラフ表示（勤怠推移、部門別統計）
- リアルタイム通知センター

#### ユーザー管理
- CRUD操作完備
- 退職処理機能（退職日・理由記録）
- ロールベースアクセス制御（6ロール対応）
- CSV/PDFエクスポート

#### 勤怠管理
- ワンクリック打刻
- 月次統計（実働時間・残業時間）
- カレンダー表示
- チーム勤怠確認
- CSVエクスポート

#### 休暇管理
- 休暇申請フロー
- 残日数管理（年次・特別・病欠）
- 承認ワークフロー統合
- PDFエクスポート

#### ワークフロー管理
- 8種類の申請タイプ対応
  - 休暇申請、残業申請、経費申請、出張申請、購買申請
  - 書類承認、シフト変更、リモートワーク申請
- 多段階承認フロー
- 条件分岐ルール（金額・日数・時間）
- エスカレーション機能
- 代理承認設定
- 差し戻し機能
- 一括承認

#### 給与管理
- 給与明細管理（15名分のデモデータ）
- 賞与明細管理（夏季・冬季・特別賞与）
- 年末調整対応
- 税金・社会保険料自動計算
- PDF出力（給与明細・賞与明細・源泉徴収票）
- CSVエクスポート

#### 人事評価
- 評価シート管理
- 目標設定・進捗管理
- フィードバック機能
- PDFエクスポート

#### 組織管理
- 組織図表示（ツリー構造）
- 部門・チーム管理
- メンバー配置
- 組織変更履歴

#### 資産管理
- PC資産管理（15台のデモデータ）
- 車両管理（5台のデモデータ）
- メンテナンス記録
- 業者管理
- CSVエクスポート

#### SaaS管理
- SaaSサービス管理（10サービス）
- ライセンス割り当て
- コスト分析
- 部門別・ユーザー別管理
- CSVエクスポート

#### 設定管理（10タブ）
1. 基本設定 - 会社情報、締め日設定
2. 通知設定 - Email/アプリ内通知
3. セキュリティ - パスワードポリシー、2FA
4. 外観 - ダークモード/ライトモード
5. 言語 - 日本語/英語切り替え
6. データ - CSV/JSON一括エクスポート、バックアップ/リストア
7. 監査ログ - システム操作履歴
8. ユーザー設定 - 権限管理
9. 権限管理 - RBAC設定
10. 承認フロー - 承認ルート管理

#### 承認フロー管理 ⭐️ NEW!
- 組織連動型フロー（1-5階層上まで自動）
- カスタムフロー（手動ステップ設定）
- 条件分岐ルール（金額・日数・時間）
- ワークフロー自動統合
- フロー作成・編集・複製・削除

#### 入社手続き管理
- 新入社員ダッシュボード
- 4フォーム管理
  - 基本情報フォーム
  - 家族情報フォーム
  - 銀行口座フォーム
  - 通勤経路フォーム
- HR管理画面（承認・差し戻し）
- 進捗管理

---

### 2. データ永続化（18ストア）

すべてのデータがLocalStorageに永続化され、ブラウザをリロードしてもデータが保持されます。

- payroll-store (1,024行)
- vehicle-store (801行)
- workflow-store (700行) ⭐️ 承認フロー自動生成対応
- approval-flow-store (525行) ⭐️ NEW!
- saas-store (433行)
- leave-management-store (387行)
- attendance-history-store (366行)
- performance-evaluation-store (353行)
- pc-store (335行)
- organization-store (331行)
- todo-store (263行)
- attendance-store (262行)
- company-settings-store (174行)
- user-store (169行)
- approval-store (144行)
- ui-store (128行)
- notification-store (104行)
- tenant-store (73行)

---

### 3. データ出力機能

#### CSV出力（10種類）
- 勤怠データ
- 給与データ
- 賞与データ
- 人事評価データ
- 休暇データ
- ユーザーデータ
- 車両データ
- PC資産データ
- SaaSサービスデータ
- ライセンス割り当てデータ

#### PDF出力（6種類）
- 給与明細
- 賞与明細
- 源泉徴収票
- 休暇申請書
- 人事評価シート
- 一括PDF出力

#### 一括バックアップ
- 全12ストアのJSON一括出力
- リストア機能
- バックアップサイズ計算

---

### 4. セキュリティ機能

#### 監査ログ
- システム操作履歴の完全記録
- 10カテゴリ×10アクション対応
- フィルター機能（カテゴリ・操作・重要度・日付範囲）
- CSVエクスポート
- 30日以前ログの自動削除

#### データマスキング
- マイナンバー・口座番号のマスキング
- メール・電話番号・住所のマスキング
- 給与額の権限別マスキング
- IPアドレス・クレジットカード番号のマスキング

#### RBAC（ロールベースアクセス制御）
- 6ロール対応
  - employee（一般社員）
  - manager（マネージャー）
  - executive（経営者）
  - hr（人事担当）
  - admin（システム管理者）
  - applicant（新入社員）
- メニュー単位の細かいアクセス制御

---

### 5. データ連携強化

#### API統合準備
- 共通レスポンス型定義
- APIクライアント強化
- トークン管理（自動リフレッシュ）
- リトライロジック（最大3回、指数バックオフ）
- エラーハンドリング

#### セッション管理
- セッション有効期限（24時間）
- アイドルタイムアウト（30分）
- アクティビティ検出
- ブラウザタブ間同期
- 自動ログアウト

#### データ同期
- 楽観的更新
- データキャッシュ（TTL 5分）
- 同期キュー（リトライ最大3回）
- オフライン対応

---

### 6. アクセシビリティ&パフォーマンス

#### アクセシビリティ（WCAG 2.1 AA準拠）
- ARIA属性ヘルパー
- スクリーンリーダー対応
- キーボードショートカット
- カラーコントラストチェッカー
- Skip Link

#### パフォーマンス最適化
- コード分割（Reactチャンク、UIライブラリチャンク等）
- 遅延読み込み（モーダル、チャート、カレンダー等）
- Web Vitals計測
- バンドルサイズ最適化（全ページ244kB以下）

---

### 7. レスポンシブデザイン ⭐️ NEW!

主要3ページのレスポンシブ対応完了
- workflow/page.tsx
- attendance/page.tsx
- organization/page.tsx

ブレークポイント:
- モバイル: ~640px（1列）
- タブレット: 640px~1024px（2列）
- デスクトップ: 1024px~（3-4列）

---

## 🧪 テスト

### E2Eテスト
- Playwright導入
- 30/30 tests passing (100%)
- テストスイート:
  - login.spec.ts (4テスト)
  - leave-request.spec.ts (8テスト)
  - payroll-pdf.spec.ts (10テスト)
  - onboarding.spec.ts (8テスト)

---

## 📊 実装統計

- **総コード量**: 約21,762行のTypeScript/React
- **ページ数**: 30ページ
- **Zustandストア**: 18ストア（6,572行）
- **CSV出力**: 10種類（802行）
- **PDF出力**: 6種類（1,850行）
- **API統合**: 1,935行
- **アクセシビリティ**: 586行
- **パフォーマンス**: 386行

---

## 🚀 デプロイ準備

### 環境要件
- Node.js 18.x以上
- Next.js 14.2.15
- TypeScript 5.x
- Prisma 6.17.1

### 環境変数
```bash
DATABASE_URL="postgresql://..."
NEXT_PUBLIC_SUPABASE_URL="https://..."
NEXT_PUBLIC_SUPABASE_ANON_KEY="..."
```

### ビルドコマンド
```bash
npm run build
npm run start
```

---

## 📝 今後の拡張予定

### 優先度: 高
- バックエンドAPI統合
- データベース連携
- 認証システム統合

### 優先度: 中
- オンボーディングフォーム完成
- 承認ルートプレビュー機能
- ドラッグ&ドロップUI

### 優先度: 低
- 高度な条件分岐（AND/OR組み合わせ）
- カスタムフィールドサポート

---

## 🙏 謝辞

Dandori Portal v1.0.0のリリースにご協力いただいた全ての方に感謝します。

**開発期間**: 2025-09-27 ~ 2025-10-26（約1ヶ月）
**フェーズ完了**: Phase 1 ~ Phase 11-3、Phase 9
**進捗率**: 95%

---

## 📞 サポート

問題や質問がある場合は、GitHubのIssueまでお願いします。

---

**Dandori Portal Team**
2025-10-26
